<html lang="pl">
<head>
    <meta charset="utf-8">
    <title>Losowanie liczb</title>
    <link rel="stylesheet" href="Zad2.css" type="text/css" />
</head>
<body>

<form method="POST" class="form-control">
   <input type="text" class="form-title" placeholder="Tytuł">
   <input type="text" class="form-author" placeholder="Autor">
   <input type="number" class="form-priority" placeholder="Priorytet">
   <select class="form-categories">
     <option value="Sci-Fi">Sci-Fi</option> 
     <option value="Popularno-naukowa">Popularno-naukowa</option> 
     <option value="Dramat">Dramat</option> 
   </select>
  <input type="submit" value="Prześlij" class="form-submit">
</form>

<p class="form-error"></p>

<table class="books">
  <tr>
    <td>Tytuł</td>
    <td>Autor</td>
    <td>Priorytet</td>
    <td>Kategoria</td>
  </tr>
</table>
<script>
var error = document.querySelector(".form-error");

let formErrors = [];

document.querySelector(".form-control").addEventListener("submit", (e) => {
  e.preventDefault();
 
  let title = document.querySelector(".form-title").value;
  let author = document.querySelector(".form-author").value;
  let number = document.querySelector(".form-priority").value;
  let category = document.querySelector(".form-categories").value;
  
  validateTitle(title);
  validateAuthor(author);
  validatePriority(number);
  
  if(!formErrors.length) {
    var table = document.querySelector(".books");
    let row = table.insertRow(1);
    let title_cell = row.insertCell(0);
    let author_cell = row.insertCell(1);
    let priority_cell = row.insertCell(2);
    let category_cell = row.insertCell(3);
    
    title_cell.innerHTML = title;
    author_cell.innerHTML = author;
    priority_cell.innerHTML = number;
    category_cell.innerHTML = category;
    this.reset();
  } else {
    error.innerHTML = (formErrors.toString()).split(",").join("<br>");
  }
});

function validateTitle(title) {
  if(title.length < 1) {
    formErrors.push("Pole tytuł musi mieć conajmniej 1 znak!");
  }
}

function validateAuthor(author) {
  if(author.length < 3)  {
    formErrors.push("Pole autor musi mieć conajmniej 3 znaki!");
  }
}

function validatePriority(priority) {
  if(priority < 1 || priority > 5) {
    formErrors.push("Priorytet musi być między 1 - 5");
  }
}
</script>
</body>
</html>